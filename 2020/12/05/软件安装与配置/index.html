<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">


    <meta name="author" content="WilsonWu">



    <meta name="keywords" content="谷粒商城"/>



    <meta name="description" content="安装VirtualBox安装vagrant并重启
cmd输入指令

1234vagrant init centos/7  		//初始化操作vagrant up 				   //下载镜像并启动虚拟机vagrant ssh				   //使用默认用户vagrant 登录虚拟机whoami /..."/>


<meta name="Robots" content="all">


    <title>吴志银的个人博客 | 谷粒商城-软件安装与配置</title>


<link rel="icon" href="/images/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/style.css">


<script src="/js/highlight.min.js"></script>

<meta name="generator" content="Hexo 5.2.0"></head>
<body>
    <div class="main-container">
        <header class="header">
    <div class="global-width">
        <nav class="nav-box">
            
                <a class="nav-item" href="/"
                
                >首页</a>
            
                <a class="nav-item" href="/resume"
                
                >简历</a>
            
                <a class="nav-item" href="/mood"
                
                   target="_blank"
                
                >心情</a>
            
                <a class="nav-item" href="/amusement/tetris"
                
                   target="_blank"
                
                >娱乐</a>
            
                <a class="nav-item" href="/about"
                
                >不榖</a>
            
        </nav>
    </div>
</header>

        <section class="content global-width">
            <div class="main">
                <article class="box post">
    <div class="post-title align-center detail-title">谷粒商城-软件安装与配置</div>
    <div class="post-meta align-center">
        
            <span class="label">原创</span>
            <span class="dotted">|</span>
        
        <i class="fa fa-calendar"></i> <time>2020-12-05</time>
        <span class="dotted">|</span>
        <i class="fa fa-user"></i> WilsonWu
        
    </div>

    <div class="post-content">
        <h2 id="安装VirtualBox"><a href="#安装VirtualBox" class="headerlink" title="安装VirtualBox"></a>安装VirtualBox</h2><h3 id="安装vagrant并重启"><a href="#安装vagrant并重启" class="headerlink" title="安装vagrant并重启"></a>安装vagrant并重启</h3><blockquote>
<p>cmd输入指令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vagrant init centos/7  		//初始化操作</span><br><span class="line">vagrant up 				   //下载镜像并启动虚拟机</span><br><span class="line">vagrant ssh				   //使用默认用户vagrant 登录虚拟机</span><br><span class="line">whoami //查看当前用户名 ls //查看目录 exit;//退出</span><br></pre></td></tr></table></figure>
<h3 id="配置虚拟机网络配置"><a href="#配置虚拟机网络配置" class="headerlink" title="配置虚拟机网络配置"></a>配置虚拟机网络配置</h3><ol>
<li>打开路径 C:\Users\Mechrevo下 Vagrantfile文件</li>
<li>cmd 输入 ipconfig 查看对应IPv4地址</li>
</ol>
<p><img src="/.com//ip.png" alt="ip"></p>
<ol start="3">
<li>修改Vagrantfile 解除对应代码注释并修改ip</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.10&quot;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>输入vagrant reload 重新加载虚拟机</p>
</li>
<li><p>测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//从本机ping虚拟机</span><br><span class="line">C:\Users\Mechrevo&gt;ping 192.168.56.10</span><br><span class="line"></span><br><span class="line">正在 Ping 192.168.56.10 具有 32 字节的数据:</span><br><span class="line">来自 192.168.56.10 的回复: 字节=32 时间&lt;1ms TTL=64</span><br><span class="line">来自 192.168.56.10 的回复: 字节=32 时间&lt;1ms TTL=64</span><br><span class="line">来自 192.168.56.10 的回复: 字节=32 时间&lt;1ms TTL=64</span><br><span class="line">来自 192.168.56.10 的回复: 字节=32 时间&lt;1ms TTL=64</span><br><span class="line"></span><br><span class="line">192.168.56.10 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 0ms，最长 = 0ms，平均 = 0ms</span><br><span class="line">    </span><br><span class="line">//从虚拟机ping本机</span><br><span class="line">[vagrant@localhost ~]$ ping 192.168.85.1</span><br><span class="line">PING 192.168.85.1 (192.168.85.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.85.1: icmp_seq=1 ttl=127 time=0.456 ms</span><br><span class="line">64 bytes from 192.168.85.1: icmp_seq=2 ttl=127 time=0.698 ms</span><br><span class="line">64 bytes from 192.168.85.1: icmp_seq=3 ttl=127 time=0.517 ms</span><br><span class="line">64 bytes from 192.168.85.1: icmp_seq=4 ttl=127 time=0.626 ms</span><br><span class="line">--- 192.168.85.1 ping statistics ---</span><br><span class="line">10 packets transmitted, 10 received, 0% packet loss, time 9003ms</span><br><span class="line">rtt min/avg/max/mdev = 0.456/0.565/0.698/0.076 ms</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
</ol>
<h3 id="下载并配置Docker容器"><a href="#下载并配置Docker容器" class="headerlink" title="下载并配置Docker容器"></a>下载并配置Docker容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//1.卸载老版本</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum remove docker \</span></span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line">//2.下载必要环境</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y yum-utils</span></span><br><span class="line">//3.设置镜像下载地址</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager \</span></span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">//4.安装Docker</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install docker-ce docker-ce-cli containerd.io</span></span><br><span class="line">//5.启动Docker</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br><span class="line">//6.配置Docker开机自启</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line">//6.测试</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker -v //查看版本 $ sudo docker images //查看镜像库</span></span><br></pre></td></tr></table></figure>

<h3 id="配置docker阿里云镜像加速"><a href="#配置docker阿里云镜像加速" class="headerlink" title="配置docker阿里云镜像加速"></a>配置docker阿里云镜像加速</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//1.阿里云官方网站注册并登录,找到配置镜像加速器</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://d61mj2wb.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="docker安装mysql"><a href="#docker安装mysql" class="headerlink" title="docker安装mysql"></a>docker安装mysql</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">//1.下载镜像文件</span><br><span class="line">docker pull mysql:5.7</span><br><span class="line">su root //使用root用户权限</span><br><span class="line">//2.创建实例并启动</span><br><span class="line">docker run -p 3306:3306 --name mysql \</span><br><span class="line">-v /mydata/mysql/log:/var/log/mysql \</span><br><span class="line">-v /mydata/mysql/data:/var/lib/mysql \</span><br><span class="line">-v /mydata/mysql/conf:/etc/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=root \</span><br><span class="line">-d mysql:5.7</span><br><span class="line"></span><br><span class="line">参数说明:</span><br><span class="line">	-p 3306:3306 :将容器的3306端口映射到主机的3306端口</span><br><span class="line">	-v /mydata/mysql/log:/var/log/mysql :将日志文件夹挂载到主机</span><br><span class="line">	-v /mydata/mysql/data:/var/lib/mysql :将数据文件夹挂载到主机</span><br><span class="line">	-v /mydata/mysql/conf:/etc/mysql :将配置文件夹挂载到主机</span><br><span class="line">	-e MYSQL_ROOT_PASSWORD=root :初始化root用户的密码</span><br><span class="line">	-d :以后台方式运行 </span><br><span class="line">	mysql:5.7 : 表示使用mysql5.7的镜像</span><br><span class="line"></span><br><span class="line">//3.验证是否运行成功</span><br><span class="line">docker ps //查看运行中的容器</span><br><span class="line">docker exec -it mysql /bin/bash //进入mysql内部</span><br><span class="line">whereis mysql //查看mysql位置</span><br><span class="line"></span><br><span class="line">//4.MySQL配置 </span><br><span class="line">vi /mydata/mysql/conf/my.cnf</span><br><span class="line">//输入 i 编辑粘贴</span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">init_connect=&#x27;SET collation_connection=utf8_unicode_ci&#x27;</span><br><span class="line">init_connect=&#x27;SET NAMES utf8&#x27;</span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_unicode_ci</span><br><span class="line">skip-character-set-client-handshake</span><br><span class="line">skip-name-resolve</span><br><span class="line"></span><br><span class="line">//wq保存</span><br><span class="line">注意:解决MYSQL连接慢的问题</span><br><span class="line">在配置文件中加入如下,并重启mysql</span><br><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve //跳过域名解析</span><br><span class="line"></span><br><span class="line">//5.重启</span><br><span class="line">docker restart mysql</span><br><span class="line">//查看是否配置文件映射到指定位置</span><br><span class="line">docker exec -it mysql /bin/bash</span><br><span class="line">cd /etc/mysql/</span><br><span class="line">ls</span><br><span class="line">cat my.cnf</span><br></pre></td></tr></table></figure>

<h3 id="docker安装redis"><a href="#docker安装redis" class="headerlink" title="docker安装redis"></a>docker安装redis</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//1.下载redis镜像</span><br><span class="line">docker pull redis</span><br><span class="line">//2.创建实例并启动</span><br><span class="line">mkdir -p /mydata/redis/conf</span><br><span class="line">touch /mydata/redis/conf/redis.conf</span><br><span class="line"></span><br><span class="line">//3.运行redis容器</span><br><span class="line">docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data \</span><br><span class="line">-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">-d redis redis-server /etc/redis/redis.conf</span><br><span class="line">//4.测试redis</span><br><span class="line">docker exec -it redis redis-cli</span><br><span class="line">set a b</span><br><span class="line">get a</span><br><span class="line">exit</span><br><span class="line">//4.配置redis数据持久化 在redis.conf添加</span><br><span class="line">appendOnly yes</span><br><span class="line">更多redis配置 看网站https://redis.io/topics/config</span><br><span class="line">推荐使用可视化工具:Redis Desktop Manager</span><br></pre></td></tr></table></figure>


    </div>
</article>
            </div>
            <div class="aside">
    
        <div class="box widget">
    <div class="introduction">
        <p><img src="/images/avatar.jpg" alt="head-sculpture" /></p>
        <p class="name">
            吴志银
        </p>
        <p class="slogan">流连矣 忘景幻云催 峦栈醺醺说旧梦 重山迟迟映霞辉 向晚共邀归 —— 忆江南</p>
    </div>
</div>
    
        
<div class="box widget">
    <div class="title">最新</div>
    <ul class="item-box">
        
            
                <li><a href="/2020/12/05/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">谷粒商城-软件安装与配置</a></li>
            
        
            
                <li><a href="/2020/12/05/%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/">谷粒商城-环境开发工具安装配置</a></li>
            
        
            
                <li><a href="/2020/12/05/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">谷粒商城-项目搭建</a></li>
            
        
            
                <li><a href="/2020/09/29/first/">我的第一个博客</a></li>
            
        
            
                <li><a href="/2020/09/28/hello-world/">Hello World</a></li>
            
        
    </ul>
</div>

    
        
    
        
  <div class="box widget">
    <div class="title">归档</div>
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">2020-12</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">2020-09</a><span class="archive-list-count">2</span></li></ul>
  </div>

    
        
    
</div>
        </section>
        <footer class="footer">
    <div class="global-width footer-box">
        <div class="copyright">
            <span>Copyright &copy; 2020</span>
            <span class="dotted">|</span>
            <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">WilsonWu</a></span>
            <span class="dotted">|</span>
            <span>Theme by <a href="javascript:">WilsonWu</a></span>
            <span class="dotted">|</span>
            <span><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn">浙ICP备12345678号-1</a></span>
        </div>
    </div>
</footer>
    </div>

<script>
    hljs.initHighlightingOnLoad();
</script>
</body>
</html>